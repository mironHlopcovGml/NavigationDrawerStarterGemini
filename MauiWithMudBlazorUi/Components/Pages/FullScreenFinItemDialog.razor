@using MauiAppWithMudBlazor.Components.Models
<MudContainer Class="align-center" MaxWidth="MaxWidth.ExtraLarge" Style="padding:0px; overflow:auto">
    <MudDialog Style="padding:0px;">
        <TitleContent>
            <MudAppBar Dense="true" Elevation="0">
                <MudIconButton Icon="@Icons.Material.Outlined.ArrowBack" Color="Color.Inherit" OnClick="Cancel" />
                <MudSpacer />
                <MudIconButton Icon="@Icons.Material.Outlined.Edit" OnClick="Edit" />
                <MudIconButton Icon="@Icons.Material.Outlined.MoreVert" Color="Color.Inherit" />
            </MudAppBar>
        </TitleContent>
        <DialogContent >
            <FinItemPage Item="@Item" VM="@VM" Editable="@IsEditanle" />
        </DialogContent>
        <DialogActions>
            <MudButton OnClick="Cancel">Cancel</MudButton>
            <MudButton Color="Color.Primary" OnClick="Submit">Ok</MudButton>
        </DialogActions>
    </MudDialog>
</MudContainer>

@code {



    [CascadingParameter]
    private IMudDialogInstance  MudDialog { get; set; }
    [Parameter]
    public FinanceItem Item { get; set; }
    [Parameter]
    public MainViewModel VM { get; set; }

    bool IsEditanle;


    private async Task Submit() 
    {
        MudDialog.Close(DialogResult.Ok(Item));
        await VM.UpdateItemValueAsync(Item.Id, Item);
    }

    private async Task Cancel() 
    {

        await VM.ResetFinItem(Item);
        MudDialog.Cancel();

    }

    private void Edit() => IsEditanle = !IsEditanle;

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }
}